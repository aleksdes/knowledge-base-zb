# Vite

Vite - это быстрый сборщик проектов на JavaScript, разработанный Evan You, создателем Vue.js. Он использует современные технологии, такие как ES Modules и превращает их в код, который может быть использован в браузере без необходимости предварительной сборки.

### Основные возможности:

1. Быстрая разработка. Vite запускает сервер разработки и обновляет страницу браузера при изменении кода. Благодаря этому, время, затрачиваемое на разработку, сокращается.

2. Оптимизация. Vite анализирует код и удаляет неиспользуемые модули, что уменьшает размер бандла и уменьшает количество неиспользуемого кода.

3. Поддержка TypeScript. Vite поддерживает TypeScript из коробки, что значительно ускоряет разработку, особенно при использовании Vue.js.

4. Множество расширений. Vite может иметь множество расширений для предварительной обработки файлов, таких как Sass, Less, PostCSS. Также, Vite поддерживает динамическую загрузку модулей из CDN, что уменьшает размер бандла.

5. Поддержка Hot Module Replacement. Vite умеет заменять модули на лету при их изменении, что не требует перезагрузки страницы.

6. Конфигурация по умолчанию. Vite имеет набор настроек по умолчанию, что позволяет быстро начать работу с проектом.

7. Легковесность. Vite использует меньше ресурсов, чем многие другие сборщики, что может быть полезно при работе с медленными машинами.

Vite есть в двух версиях - Vite 1 и Vite 2, последняя версия является более функциональной и поддерживает дополнительные возможности для разработки.

В целом, Vite - это быстрый и легкий сборщик, который предлагает набор возможностей для быстрой разработки проектов на JavaScript, включая поддержку TypeScript, обработку файлов, структурирование кода и т.д. Если вы ищете легкий и быстрый инструмент для разработки, то Vite - отличный выбор для вас.


### Несмотря на свои многочисленные преимущества, у Vite есть и некоторые слабые стороны:

1. Недостаточно хорошая поддержка многих дополнительных функций

Одна из главных слабых сторон Vite заключается в том, что он пока не поддерживает полный набор инструментов и функций, которые представлены в более классических сборщиках, таких как Webpack или Parcel. Некоторые функции могут быть не доступны из-за того, что Vite только начинает свой путь и еще не получил достаточно широкой поддержки со стороны сообщества.

Ниже представлено несколько примеров:
- Обработка изображений и других ресурсов (url-loader, file-loader)

```js
// Webpack
module.exports = {
  // ...
  module: {
    rules: [
      {
        test: /\.(png|jpe?g|gif)$/i,
        use: [
          {
            loader: 'url-loader',
            options: {
              limit: 8192,
            },
          },
        ],
      },
    ],
  },
};

// Vite
// Нет встроенной поддержки, нужно использовать сторонние плагины
```

- Более сложные оптимизации (AggressiveSplittingPlugin, ModuleConcatenationPlugin)

```js
// Webpack
module.exports = {
  // ...
  optimization: {
    splitChunks: {
      chunks: 'all',
      name: true,
    },
    concatenateModules: true,
  },
};

// Vite
// Нет встроенной поддержки
```

2. Менее гибкий, чем Webpack

Несмотря на то, что Vite был создан для выполнения задач по сборке JavaScript, он может не быть настолько гибким и масштабируемым, как Webpack. Например, для многих функций могут потребоваться настройки вручную, так как Vite не обрабатывает специфические задачи по сборке.

3. Малое сообщество

Еще одним недостатком Vite на данный момент является то, что сообщество разработчиков, работающих над этим инструментом, не так большое, как у более устоявшихся опций. И хотя этот фактор может измениться в будущем, сейчас Vite может представлять риски для больших, сложных проектов, где требуется более узкая специализация.

4. Не подходит для всех задач по сборке

Несмотря на то, что Vite может быть чрезвычайно полезным в многих случаях, он может не вписываться в определенные задачи по сборке или не соответствовать определенным проектам, в которых нужна полная кастомизация.

5. Недостаточная стабильность

Так как Vite еще относительно новый инструмент, возможны некоторые проблемы со стабильностью. И хотя эти проблемы могут проявляться не так часто, как в более старых инструментах, это все же фактор, который может противодействовать использованию Vite в проектах, где требуется большая стабильность.

## Быстрое развёртывание вашего Vite проекта

NPM:
```bash
$ npm init vite@latest
```

Yarn:
```bash
$ yarn create vite
```

PNPM:
```bash
$ pnpm dlx create-vite
```

## Создание шаблона

```bash
$ npm init vite@latest [project-name] --template [template-name]
```

- [project-name] - название проекта
- [template-name] - используемый шаблон

Пример
```bash
$ npm init vite@latest my-vue-app --template vue
```
Поддерживаемые пред установки шаблонов включают:

- vanilla(чистый JS)
- vanilla-ts (TypeScript и ничего больше)
- vue
- vue-ts
- react
- react-ts
- preact
- preact-ts
- lit-element
- lit-element-ts
- svelte
- svelte-ts


## Vite примеры настройки

Настройка Vite - важный этап, который позволяет настроить сборщик под конкретный проект. Ниже приведены примеры настройки Vite.

1. Настройка базового URL

Можно указать базовый URL проекта, который будет использоваться в сборке и при запуске dev-сервера. Для этого в файле vite.config.js необходимо определить свойство base:

```js
// vite.config.js
module.exports = {
  base: '/my-project/'
}
```

2. Настройка путей

Можно настроить пути к исходникам, входным файлам и выходным файлам. Для этого нужно определить свойства root, srcDir, outDir и assetsDir:

```js
// vite.config.js
module.exports = {
  root: __dirname,
  srcDir: 'src',
  outDir: 'public',
  assetsDir: 'assets'
}
```

1. Настройка alias

Можно указать псевдонимы для каталогов или модулей, что упрощает импорт модулей и улучшает читабельность кода. Для этого нужно определить свойство alias:

```js
// vite.config.js
module.exports = {
  alias: {
    '@': __dirname + '/src',
    'vue': 'vue/dist/vue.esm-bundler.js'
  }
}
```

1. Настройка оптимизации

Можно настроить оптимизацию кода в бандле. Например, можно удалить неиспользуемый код, объединить небольшие модули в более крупные и т.д. Для этого нужно определить свойство build:

```js
// vite.config.js
module.exports = {
  build: {
    // опции оптимизации
    minify: true,
    rollupOptions: {
      output: {
        format: 'es'
      }
    }
  }
}
```

1. Настройка dev-сервера

Можно настроить dev-сервер Vite, определить порт и IP-адрес, который будет использоваться для запуска dev-сервера. Для этого нужно определить свойство server:

```js
// vite.config.js
module.exports = {
  server: {
    port: 3000,
    host: '0.0.0.0'
  }
}
```

## Плагины

Установка

```bash
$ npm install @vitejs/plugin-vue
```

Использование
```js
// vite.config.js
import { defineConfig } from 'vite'
const { createVuePlugin } = require('@vitejs/plugin-vue')

export default defineConfig({
    plugins: [
        createVuePlugin()
    ]
})
```

## Переменные среды окружения и режимы

Приложения, которые разрабатываются с использованием сборщика Vite, могут быть настроены для работы в различных средах и режимах. Это может быть достигнуто с помощью переменных среды окружения и параметров конфигурации сборщика.

Одной из основных переменных среды окружения является `NODE_ENV`. Эта переменная определяет текущую среду работы приложения. Когда `NODE_ENV` равно `"production"`, приложение будет работать в производственной среде, а когда `NODE_ENV` равно `"development"`, приложение будет работать в режиме разработки. Вы можете установить переменную `NODE_ENV` непосредственно в вашем терминале перед запуском Vite:

```bash
NODE_ENV=production npm run build
```

или в скрипте `package.json`:

```json
{
  "scripts": {
    "build": "NODE_ENV=production vite build"
  }
}
```

Помимо переменной `NODE_ENV`, сборщик Vite также поддерживает другие переменные среды окружения, такие как `VITE_XYZ`. Вы можете использовать эти переменные в вашем коде, чтобы выставлять различную конфигурацию, например, адреса API, токены доступа, пароли и т.д. Вот пример, который показывает, как использовать переменную среды окружения в конфигурации Vite:

```js
export default {
  baseURL: import.meta.env.VITE_BASE_URL
}
```

Также сборщик Vite позволяет определять режим работы приложения в конфигурационном файле `vite.config.js`. Для этого используйте следующий код:

```js
export default {
  mode: 'production'
}
```

или такой код для использования переменной среды окружения:

```js
export default {
  mode: process.env.NODE_ENV || 'development'
}
```

Это лишь некоторые примеры настройки Vite. С помощью Vite можно настроить множество других параметров, подробнее о которых можно прочитать в документации. Вы можете настроить Vite для своих нужд и значительно повысить производительность и удобство разработки.
