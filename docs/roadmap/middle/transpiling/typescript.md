# Настройка typescript

Корректная настройка typescript крайне полезна для проекта. Она позволяет избежать попадания в кодовую базу опасных коммитов и направляет разработчика во время разработки.

Для старта настройки установим в проект зависимость typescript

```bash
npm i --save-dev typescript
```

## Конфигурация сборщика

Конфигурация сборщика для работы с typescript необходима для корректной обработки сборщиком файлов .ts и .tsx.

Настроить typescript в проекте на react можно с помощью [прессета babel](https://babeljs.io/docs/en/babel-preset-typescript) и с помощью [лоадера для webpack](https://github.com/TypeStrong/ts-loader).

Однако первый способ настоятельно не рекомендуется к использованию, так как babel не проводит тайпчекинг, а лишь вырезает аннотации типов из кода. Это значит, что потенциально проблемный код не помешает сборке, что не будет мотивировать разработчиков исправлять проблемы типизации. Стоит отметить, что существуют способы добавить тайпчекинг отдельно, однако в таком случае для конфигруации потребуется гораздо больше времени, в том числе на проверки корректно работы сборки.

Использование лоадера webpack существенно упрощает процесс подключение typescript к проекту, а также обладает полным функционалом по тайпчекингу и компиляции проекта. Для подключения к проекту необходимо установить лоадер и добавить конфигурацию для него:

```bash
npm i --save-dev ts-loader

```

```js
module: {
	loaders: [{ test: /\\.tsx?$/, loader: "ts-loader" }],
}
```

После этого файлы .tsx и .ts будут котироваться вебпаком, и для окончания настройки потребуется добавление tsconfig.

## Конфигурация tsconfig

Файл tsconfig описывает взаимодействие typescript с файлами проекта.

Создадим в корне проекта файл tsconfig.json и опишем следующую конфигурацию:

```json5
{
  "compilerOptions": {
    "target": "es5", // Формат es в который будут скомпилированы ts файлы проекта
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true, // Позволяет использовать файлы js
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true, // Включает strict mode для ts файлов
    "forceConsistentCasingInFileNames": true,
    "noFallthroughCasesInSwitch": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx" // Поддержка jsx
  },
  "include": [
    "src" // Определяет директорию, с которой будет работать ts. Файлы вне этой директории не будут скомпилированы.
  ]
}
```

## Дополнительные рекомендации

- Если для развертывания проекта используется утилита create-react-app, можно воспользоваться командой `npx create-react-app my-app --template typescript`
- Для гарантии того, что пулл реквесты не будут содержать код, который валит сборку, рекомендуется добавить в проект husky, и запускать сборку перед каждым коммитом
